 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){function da(){this.ya=!1;this.ba=null;this.Pd=void 0;this.aa=1;this.Kc=this.ge=0;this.ta=null}function fa(a){if(a.ya)throw new TypeError("Generator is already running");a.ya=!0}da.prototype.za=function(a){this.Pd=a};da.prototype.Ba=function(a){this.ta={ve:a,Te:!0};this.aa=this.ge||this.Kc};da.prototype.return=function(a){this.ta={return:a};this.aa=this.Kc};function la(a){this.o=new da;this.hf=a}
la.prototype.za=function(a){fa(this.o);if(this.o.ba)return pa(this,this.o.ba.next,a,this.o.za);this.o.za(a);return sa(this)};function ua(a,c){fa(a.o);var e=a.o.ba;if(e)return pa(a,"return"in e?e["return"]:function(l){return{value:l,done:!0}},c,a.o.return);a.o.return(c);return sa(a)}la.prototype.Ba=function(a){fa(this.o);if(this.o.ba)return pa(this,this.o.ba["throw"],a,this.o.za);this.o.Ba(a);return sa(this)};
function pa(a,c,e,l){try{var q=c.call(a.o.ba,e);if(!(q instanceof Object))throw new TypeError("Iterator result "+q+" is not an object");if(!q.done)return a.o.ya=!1,q;var p=q.value}catch(n){return a.o.ba=null,a.o.Ba(n),sa(a)}a.o.ba=null;l.call(a.o,p);return sa(a)}
function sa(a){for(;a.o.aa;)try{var c=a.hf(a.o);if(c)return a.o.ya=!1,{value:c.value,done:!1}}catch(e){a.o.Pd=void 0,a.o.Ba(e)}a.o.ya=!1;if(a.o.ta){c=a.o.ta;a.o.ta=null;if(c.Te)throw c.ve;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function va(a){this.next=function(c){return a.za(c)};this.throw=function(c){return a.Ba(c)};this.return=function(c){return ua(a,c)};this[Symbol.iterator]=function(){return this}}
function Aa(a){function c(l){return a.next(l)}function e(l){return a.throw(l)}return new Promise(function(l,q){function p(n){n.done?l(n.value):Promise.resolve(n.value).then(c,e).then(p,q)}p(a.next())})}function Ca(a){var c=new XMLHttpRequest;c.open("GET",b.rc+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}
function Da(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var e in a)a[e]=Da(a[e],c);return a}function Ha(a,c,e){return Math.min(Math.max((e-a)/(c-a),0),1)}
function Ia(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ja(a,c){var e=c%8;return a[(c-e)/8]>>7-e&1}
function Na(a){var c=JSON.parse(a);a=c.ne;var e=c.nf,l=c.n;var q="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var p=q.length;c=new Uint8Array(p);for(var n=0;n<p;++n)c[n]=q.charCodeAt(n);q=new Float32Array(l);p=new Float32Array(e);n=a+e+1;for(var r=0;r<l;++r){for(var h=n*r,v=0===Ja(c,h)?1:-1,A=h+1,D=1,g=0,t=A+a-1;t>=A;--t)g+=D*Ja(c,t),D*=2;A=g;h=h+1+a;D=p.length;g=0;for(t=h;t<h+D;++t)p[g]=Ja(c,t),++g;for(D=h=0;D<e;++D)h+=p[D]*Math.pow(2,-D-1);q[r]=0===h&&0===
A?0:v*(1+h)*Math.pow(2,1+A-Math.pow(2,a-1))}return q}
var I=function(){function a(u,d,z){d=u.createShader(d);u.shaderSource(d,z);u.compileShader(d);return u.getShaderParameter(d,u.COMPILE_STATUS)?d:!1}function c(u,d,z){d=a(u,u.VERTEX_SHADER,d);z=a(u,u.FRAGMENT_SHADER,z);u===F&&n.push(d,z);var G=u.createProgram();u.attachShader(G,d);u.attachShader(G,z);u.linkProgram(G);return G}function e(u,d){d.A=d.A?!0:!1;if(!d.A){void 0===d.Ca&&(d.Ca="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
d.Ga&&(d.Ga=["a0"]);void 0===d.ua&&(d.ua=[2]);if(void 0===d.precision||"highp"===d.precision)d.precision=D;d.id=v++;void 0!==d.Bd&&(d.Bd.forEach(function(G,N){d.h=d.h.replace(G,d.gb[N])}),d.Bd.splice(0));d.mc=0;d.ua.forEach(function(G){d.mc+=4*G});d.ga=c(u,d.Ca,"precision "+d.precision+" float;\n"+d.h);d.v={};d.i.forEach(function(G){d.v[G]=u.getUniformLocation(d.ga,G)});d.attributes={};d.va=[];d.Ga.forEach(function(G){var N=u.getAttribLocation(d.ga,G);d.attributes[G]=N;d.va.push(N)});if(d.j){u.useProgram(d.ga);
h=d;r=d.id;for(var z in d.j)u.uniform1i(d.v[z],d.j[z])}d.fa=!0}}function l(u){Oa.Bf(Q);r!==u.id&&(Q.M(),r=u.id,h=u,F.useProgram(u.ga),u.va.forEach(function(d){0!==d&&F.enableVertexAttribArray(d)}))}function q(u,d,z){e(u,d,z);u.useProgram(d.ga);u.enableVertexAttribArray(0);r=-1;return h=d}function p(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],r=-1,h=null,v=0,A=!1,D="highp",g=["u1"],t=["u0"],w={u1:0},k={u0:0},m={u1:0,u2:1},
J={u3:0},H={s0:p(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:g,j:w,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:m},s3:{h:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",i:["u1","u4","u5"],j:w,A:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:g,j:w},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:m},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:g,j:w},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:g,j:w},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",
i:["u0","u4"],j:k},s9:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",i:["u0","u4"],j:k},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:g,j:w},s11:{h:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",
i:["u1","u6","u7"],j:{u1:0,u6:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",i:["u1","u8"],j:w},s13:{h:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
i:["u1","u9"],j:w},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:t,j:k,A:!0},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:t,j:k},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:t,j:k},
s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:t,j:k},s18:{h:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u7","u10"],j:{u0:0,u7:1,u10:2},A:!0},s19:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:t,j:k},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:t,j:k,A:!0},s21:{h:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u11","u12"],j:{u0:0,u11:1},A:!0},s22:{h:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u13"],j:w},s23:{h:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",i:["u14","u15","u16"],j:{u15:0,u14:1,u16:2},A:!0},s24:{h:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",i:["u15","u14","u17"],j:{u15:0,u14:1}},s25:{h:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u17,l=floor(h),c=h-l;vec4 m=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 n=texture2D(u18,c),o=texture2D(u19,c),p=texture2D(u20,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u14 u15 u17 u21 u18 u19 u20".split(" "),j:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6},A:!0},s26:{h:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),b=u23*vv0-a;float c=u17/u23;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u23;float k=u23*u25/u17;vec2 l=k*d,h=(l+f*u24)/u25,i=step(h,j);vec4 m=texture2D(u14,g),n=texture2D(u15,h),o=m*n*i.x*i.y,p=texture2D(u22,g);gl_FragColor=o*u24*u24+p;}",i:"u14 u15 u17 u23 u24 u25 u22".split(" "),
j:{u15:0,u14:1,u22:2}},s27:{h:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",i:["u14","u15"],j:{u15:0,u14:1},A:!0},s28:{h:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",i:["u1","u22","u26"],j:{u1:0,u22:1}},s29:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:g,j:w,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],j:w,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],j:w,precision:"lowp"},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],j:m,A:!0},s33:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],j:m,A:!0},s34:{h:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u8"],j:J},s35:{h:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u8"],j:J,A:!0},
s36:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:w,precision:"lowp",A:!0},s37:{h:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",i:["u8","u1"],j:w,precision:"lowp",
A:!0},s38:{h:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u11","u29"],j:{u1:0,u11:1,u29:2},A:!0}},P={s39:{h:"uniform float u17,u30;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u17","u14","u15","u22","u30"],gb:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{h:"uniform float u17,u30,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u17 u25 u14 u15 u22 u30".split(" "),gb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},y=null,L=null,Q={Za:function(){return A},s:function(){if(!A){y=Da(H,2);L=Da(P,2);D="highp";for(var u in y)e(F,y[u],u);I.set("s0");F.enableVertexAttribArray(0);A=!0}},uc:function(u){u.forEach(function(d){Q.tc(d)})},tc:function(u){y[u.id]=u;e(F,u,u.id)},Tc:function(u,d,z){d||(d=u);y[d]=Object.create(L[u]);y[d].Ve=!0;L[u].gb&&L[u].gb.forEach(function(G,N){y[d].h=y[d].h.replace(new RegExp(G,"g"),z[N])});e(F,y[d],
d)},set:function(u){var d=y[u];d.A&&(d.A=!1,e(F,d,u));l(d)},Aa:function(u){return q(u,p(),"s41")},cc:function(u){return q(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s42")},we:function(u){return"undefined"===typeof y[u]?!1:y[u].fa},M:function(){-1!==r&&(r=-1,h.va.forEach(function(u){0!==u&&F.disableVertexAttribArray(u)}))},dc:function(){var u=0;h.va.forEach(function(d,z){z=h.ua[z];F.vertexAttribPointer(d,z,F.FLOAT,!1,h.mc,u);u+=4*z})},bg:function(){F.enableVertexAttribArray(0)},
hb:function(){Q.ib(F)},ib:function(u){u.vertexAttribPointer(h.va[0],2,u.FLOAT,!1,8,0)},Hg:function(u,d){F.uniform1i(h.v[u],d)},K:function(u,d){F.uniform1f(h.v[u],d)},ha:function(u,d,z){F.uniform2f(h.v[u],d,z)},Ig:function(u,d){F.uniform2fv(h.v[u],d)},Ed:function(u,d){F.uniform3fv(h.v[u],d)},Jg:function(u,d,z,G){F.uniform3f(h.v[u],d,z,G)},Cf:function(u,d,z,G,N){F.uniform4f(h.v[u],d,z,G,N)},Fd:function(u,d){F.uniform4fv(h.v[u],d)},Kg:function(u,d){F.uniformMatrix2fv(h.v[u],!1,d)},Lg:function(u,d){F.uniformMatrix3fv(h.v[u],
!1,d)},Mg:function(u,d){F.uniformMatrix4fv(h.v[u],!1,d)},I:function(u,d){Q.set(u);d.forEach(function(z){switch(z.type){case "4f":F.uniform4fv(h.v[z.name],z.value);break;case "3f":F.uniform3fv(h.v[z.name],z.value);break;case "2f":F.uniform2fv(h.v[z.name],z.value);break;case "1f":F.uniform1f(h.v[z.name],z.value);break;case "1i":F.uniform1i(h.v[z.name],z.value);break;case "mat2":F.uniformMatrix2fv(h.v[z.name],!1,z.value);break;case "mat3":F.uniformMatrix3fv(h.v[z.name],!1,z.value);break;case "mat4":F.uniformMatrix4fv(h.v[z.name],
!1,z.value)}})},mg:function(){return"lowp"},m:function(){F.disableVertexAttribArray(0);Q.M();for(var u in y){var d=y[u];d.fa&&(d.fa=!1,F.deleteProgram(d.ga));d.Ve&&delete y[u]}n.forEach(function(z){F.deleteShader(z)});n.splice(0);v=0;A=!1;h=null;r=-1}};return Q}(),F=null,Sa=function(){function a(g){console.log("ERROR in ContextFF: ",g);return!1}function c(g){function t(){Pa.m();Qa.reset();k.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var w=document.createElement("canvas");w.setAttribute("width",5);w.setAttribute("height",5);var k=null;try{k=w.getContext("webgl2",g)}catch(m){return!1}if(!k)return!1;e(k);Qa.Cc(k);g=Qa.yb(k);if(!g.Y&&!g.Z)return t(),!1;g=Pa.zc(k,g);t();return g?!0:!1}function e(g){g.clearColor(0,0,0,0);g.disable(g.DEPTH_TEST);g.disable(g.BLEND);g.disable(g.DITHER);g.disable(g.STENCIL_TEST);g.disable(g.CULL_FACE);g.GENERATE_MIPMAP_HINT&&g.hint(g.GENERATE_MIPMAP_HINT,g.FASTEST);g.disable(g.SAMPLE_ALPHA_TO_COVERAGE);
g.disable(g.SAMPLE_COVERAGE);g.depthFunc(g.LEQUAL);g.clearDepth(1)}var l=null,q=null,p=null,n=null,r=!0,h=null,v=null,A=[],D={B:function(){return l.width},P:function(){return l.height},Pa:function(){return l},eg:function(){return F},$:function(){return r},flush:function(){F.flush()},Be:function(){h||(h=new Uint8Array(l.width*l.height*4));F.readPixels(0,0,l.width,l.height,F.RGBA,F.UNSIGNED_BYTE,h);return h},gg:function(){return l.toDataURL("image/jpeg")},hg:function(){Ra.L();q||(q=document.createElement("canvas"),
p=q.getContext("2d"));q.width=l.width;q.height=l.height;for(var g=D.Be(),t=p.createImageData(q.width,q.height),w=q.width,k=q.height,m=t.data,J=0;J<k;++J)for(var H=k-J-1,P=0;P<w;++P){var y=4*(J*w+P),L=4*(H*w+P);m[y]=g[L];m[y+1]=g[L+1];m[y+2]=g[L+2];m[y+3]=g[L+3]}p.putImageData(t,0,0);return q.toDataURL("image/png")},fg:function(g){!q&&g&&(q=document.createElement("canvas"),p=q.getContext("2d"));var t=g?q:document.createElement("canvas");t.width=l.width;t.height=l.height;(g?p:t.getContext("2d")).drawImage(l,
0,0);return t},s:function(g){g.le&&!g.xb?l=document.getElementById(g.le):g.xb&&(l=g.xb);l||(l=document.createElement("canvas"));l.width=g&&void 0!==g.width?g.width:512;l.height=g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.Kb&&(g.Kb=!0);void 0===g.antialias&&(g.antialias=!1);if(F)r=F instanceof WebGL2RenderingContext;else{r=!0;var t={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,
stencil:!1,depth:g.Kb};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(t.antialias=!1);var w=c(t);!w&&t.antialias&&(t.antialias=!1,w=c(t));w&&(F=l.getContext("webgl2",t));F?r=!0:((F=l.getContext("webgl",t))||(F=l.getContext("experimental-webgl",t)),r=!1)}if(!F)return a("WebGL1 and 2 are not enabled");(n=F.getExtension("WEBGL_lose_context"))&&g.ld&&(v=g.ld,l.addEventListener("webglcontextlost",v,!1));if(!Qa.s())return a("Not enough GL capabilities");e(F);I.s();
R.s();if(!Pa.zc(F,Qa.ze()))return a("Cannot filter float textures");A.forEach(function(k){k(F)});A.splice(0);return!0},Uf:function(){return new Promise(function(g){F?g(F):A.push(g)})},m:function(){F&&(Qa.m(),I.m(),Pa.m());n&&v&&(l.removeEventListener("webglcontextlost",v,!1),n=v=null);F=h=p=q=l=null;A.splice(0)}};return D}(),Oa=function(){function a(){null===c&&("undefined"!==typeof I?c=I:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{reset:function(){c=null},Bf:function(e){c!==
e&&(c&&c.M(),c=e)},Za:function(){return c.Za()},hb:function(){return c.hb()},ib:function(e){return c.ib(e)},dc:function(){return c.dc()},M:function(){return c.M()},set:function(e){return c.set(e)},Aa:function(e){a();return c.Aa(e)},cc:function(e){a();return c.cc(e)}}}(),T=function(){function a(f){F.bindTexture(F.TEXTURE_2D,f)}function c(f){d[0]=f;f=z[0];var C=f>>16&32768,M=f>>12&2047,S=f>>23&255;return 103>S?C:142<S?C|31744|((255==S?0:1)&&f&8388607):113>S?(M|=2048,C|(M>>114-S)+(M>>113-S&1)):C=(C|
S-112<<10|M>>1)+(M&1)}function e(f){var C=new Uint16Array(f.length);f.forEach(function(M,S){C[S]=c(M)});return C}function l(){if(null!==G.Hb)return G.Hb;var f=p(e([.5,.5,.5,.5]));return null===f?!0:G.Hb=f}function q(){if(null!==G.Ib)return G.Ib;var f=p(new Uint8Array([127,127,127,127]));return null===f?!0:G.Ib=f}function p(f){if(!Oa.Za()||!k)return null;var C=null,M=Math.sqrt(f.length/4);try{var S=F.getError();if("FUCKING_BIG_ERROR"===S)return!1;C=N.instance({isFloat:!1,G:!0,array:f,width:M});S=F.getError();
if(S!==F.NO_ERROR)return!1}catch(ca){return!1}Ra.L();F.viewport(0,0,M,M);F.clearColor(0,0,0,0);F.clear(F.COLOR_BUFFER_BIT);Oa.set("s0");C.xc(0);R.l(!0,!0);f=4*M*M;S=new Uint8Array(f);F.readPixels(0,0,M,M,F.RGBA,F.UNSIGNED_BYTE,S);M=!0;for(var Z=0;Z<f;++Z)M=M&&3>Math.abs(S[Z]-127);C.remove();Ra.X();return M}var n=0,r=null,h=0,v=null,A=null,D=null,g=null,t=null,w=null,k=!1,m=[],J={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,
isFlipY:null,width:0,height:0,url:null,array:null,data:null,C:null,Pc:null,Ue:!1,G:!1,ea:null,bb:4,Rb:0},H=!1,P=null,y=null,L=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Q=!1,u=!1,d=new Float32Array(1),z=new Int32Array(d.buffer),G={Hb:null,Ib:null},N={s:function(){k||(t=[F.RGBA,null,F.RGBA,F.RGBA],w=[F.RGBA,null,F.RGBA,F.RGBA],r=[F.TEXTURE0,F.TEXTURE1,F.TEXTURE2,F.TEXTURE3,F.TEXTURE4,F.TEXTURE5,F.TEXTURE6,F.TEXTURE7],Q="undefined"!==typeof JEContext,u="undefined"!==typeof Qa,Q&&JEContext.Ag()&&r.push(F.TEXTURE8,
F.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],g=[F.UNSIGNED_BYTE,F.FLOAT,F.FLOAT],k=!0)},Oe:function(){if(!A){for(var f=new Float32Array(16384),C=0;16384>C;++C)f[C]=2*Math.random()-1;A={random:N.instance({isFloat:!0,isPot:!0,array:f,width:64}),Md:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.Mf()},sg:function(){return A.Md},Mf:function(){g[1]=Qa.Cb(F)},zf:function(){w=t=[F.RGBA,F.RGBA,F.RGBA,F.RGBA]},vd:function(f){I.set("s1");Ra.L();var C=f.B(),M=f.P();F.viewport(0,0,C,M);
f.g(0);R.l(!1,!1)},qf:function(f,C){N.vd(f);F.readPixels(0,0,f.B(),f.P(),F.RGBA,F.UNSIGNED_BYTE,C)},rf:function(f,C){N.vd(f);return Qa.bc(0,0,f.B(),f.P(),C)},Jc:function(f,C,M,S,Z,ca,Y){f.activeTexture(f.TEXTURE0);var ma=f.createTexture();f.bindTexture(f.TEXTURE_2D,ma);Z=Z instanceof Float32Array?Z:new Float32Array(Z);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);
f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,ca);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,M,S,0,f.RGBA,f.FLOAT,Z);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);Y&&(Ra.X(),I.Aa(f));f.viewport(0,0,M,S);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,C,0);f.bindTexture(f.TEXTURE_2D,ma);Y?R.l(!0,!0):R.Na(f);f.deleteTexture(ma);k&&(v[0]=-1,D=null,n=0)},tb:function(f){f!==n&&(F.activeTexture(r[f]),n=f)},instance:function(f){var C;
function M(){U=void 0!==x.C.videoWidth?x.C.videoWidth:x.C.width;W=void 0!==x.C.videoHeight?x.C.videoHeight:x.C.height}function S(E){var V=F.getError();if("FUCKING_BIG_ERROR"===V)return!1;F.texImage2D(F.TEXTURE_2D,0,ja,ha,ia,E);V=F.getError();V!==F.NO_ERROR&&ha!==F.RGBA&&(ha=F.RGBA,F.texImage2D(F.TEXTURE_2D,0,ja,ha,ia,E));return!0}function Z(){if(!Ya){a(na);ta&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,ta);x.isPot?(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,x.isMirrorX?F.MIRRORED_REPEAT:F.REPEAT),F.texParameteri(F.TEXTURE_2D,
F.TEXTURE_WRAP_T,x.isMirrorY?F.MIRRORED_REPEAT:F.REPEAT)):(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE));x.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&F.texParameterf(F.TEXTURE_2D,JEContext.jg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Qf);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,x.isLinear?F.LINEAR:F.NEAREST);x.isLinear?F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x.isMipmap&&!ya?F.NEAREST_MIPMAP_LINEAR:
F.LINEAR):F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x.isMipmap&&!ya?F.NEAREST_MIPMAP_NEAREST:F.NEAREST);ha=t[x.bb-1];ja=w[x.bb-1];ia=g[K];if(Qa.$()){var E=Qa.Ce();ha===F.RGBA&&ia===F.FLOAT?x.isMipmap||x.isLinear?ja=Pa.Ee(F):Qa.Ac()?E&&(ja=E):ja=F.RGBA16F||F.RGBA:ha===F.RGB&&ia===F.FLOAT&&E&&(ja=E,ha=F.RGBA)}if(x.G&&!x.isFloat||x.isFloat&&x.isMipmap&&Pa.Ye())ja=Qa.De(),ia=Qa.Cb(F);x.Rb&&(Ka=x.Rb);x.isSrgb&&4===x.bb&&(ha=JEContext.qg());if(x.C)S(x.C);else if(x.url)S(xa);else if(oa){E=oa;try{"FUCKING_BIG_ERROR"!==
F.getError()&&(F.texImage2D(F.TEXTURE_2D,0,ja,U,W,0,ha,ia,E),F.getError()!==F.NO_ERROR&&(F.texImage2D(F.TEXTURE_2D,0,ja,U,W,0,ha,ia,null),F.getError()!==F.NO_ERROR&&F.texImage2D(F.TEXTURE_2D,0,F.RGBA,U,W,0,F.RGBA,F.UNSIGNED_BYTE,null)))}catch(Jb){F.texImage2D(F.TEXTURE_2D,0,ja,U,W,0,ha,ia,null)}x.isKeepArray||(oa=null)}else E=F.getError(),"FUCKING_BIG_ERROR"!==E&&(F.texImage2D(F.TEXTURE_2D,0,ja,U,W,0,ha,ia,null),E=F.getError(),E!==F.NO_ERROR&&(ha=F.RGBA,x.G&&ia!==F.FLOAT&&(ia=F.FLOAT,F.texImage2D(F.TEXTURE_2D,
0,ja,U,W,0,ha,ia,null))));if(x.isMipmap)if(!ya&&ea)ea.Bb(),La=!0;else if(ya){E=Math.log2(Math.min(U,W));Ba=Array(1+E);Ba[0]=na;for(var V=1;V<=E;++V){var ka=Math.pow(2,V),aa=U/ka;ka=W/ka;var za=F.createTexture();a(za);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texImage2D(F.TEXTURE_2D,0,ja,aa,ka,0,ha,ia,null);a(null);Ba[V]=za}La=!0}a(null);v[n]=-1;ta&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);Ea=!0;x.ea&&ea&&(x.ea(ea),x.ea=
null)}}function ca(){for(var E=U*W,V=2*E,ka=3*E,aa=0;aa<E;++aa)qa[0][aa]=Fa[aa],qa[1][aa]=Fa[aa+E],qa[2][aa]=Fa[aa+V],qa[3][aa]=Fa[aa+ka]}function Y(){var E=U*W*4;wa=[new Uint8Array(E),new Uint8Array(E),new Uint8Array(E),new Uint8Array(E)];qa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Ma=new Uint8Array(4*E);Fa=new Float32Array(Ma.buffer);Ga=!0}function ma(){C=new Uint8Array(U*W*4);Za=new Float32Array(C.buffer);Ta=!0}
var x=Object.assign({},J,f),B=h++;null===x.isFlipY&&(x.isFlipY=x.url||x.array?!0:!1);x.data&&(x.array="string"===typeof x.data?Na(x.data):x.isFloat?new Float32Array(x.data):new Uint8Array(x.data),x.isFlipY=!1);var K=0,ba=x.C?!0:!1,O=null,ra=null,$a=!1,Ua=null;x.G=x.G||x.isFloat;x.G&&(K=1);!x.Ue&&x.isFloat&&u&&!Qa.Ac()&&(x.isFloat=!1);x.isFloat&&(K=2);x.isAnisotropicFiltering&&Q&&!JEContext.vg()&&(x.isAnisotropicFiltering=!1);var na=x.Pc||F.createTexture(),xa=null,oa=!1,U=0,W=0,Ea=!1,Ya=!1,Ga=!1,qa=
null,wa=null,Ma=null,Fa=null,ja=null,ha=null,ia=null,ta=x.isFlipY,sb=(f=x.G&&x.isMipmap)&&Pa.ce(),ya=f&&sb?!0:!1,Ba=null,Ka=-1,La=!1;var Ta=!1;var Za=C=null;x.width&&(U=x.width,W=x.height?x.height:U);var ea={get:function(){return na},B:function(){return U},P:function(){return W},tg:function(){return x.url},wg:function(){return x.isFloat},yg:function(){return x.G},zg:function(){return x.isLinear},Bb:function(){F.generateMipmap(F.TEXTURE_2D)},ae:function(E,V){ya?(E||(E=ea.Nc()),N.tb(V),a(Ba[E]),v[V]=
-1):ea.g(V)},Nc:function(){-1===Ka&&(Ka=Math.log(U)/Math.log(2));return Ka},ye:function(E){if(ya){E||(E=ea.Nc());I.set("s12");N.tb(0);for(var V=U,ka=W,aa=1;aa<=E;++aa)V/=2,ka/=2,I.ha("u8",.25/V,.25/ka),F.viewport(0,0,V,ka),a(Ba[aa-1]),F.framebufferTexture2D(Ra.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Ba[aa],0),R.l(!1,1===aa);v[0]=-1}else ea.Bb()},Gg:function(E){(ba=!(Array.isArray(E)||E.constructor===Float32Array||E.constructor===Uint8Array))?(oa=null,x.C=E,M()):oa=E},g:function(E){if(!Ea)return!1;N.tb(E);
if(v[E]===B)return!1;a(na);v[E]=B;return!0},xc:function(E){F.activeTexture(r[E]);n=E;a(na);v[E]=B},u:function(){D=ea;F.framebufferTexture2D(Ra.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,na,0)},R:function(){D=ea;F.viewport(0,0,U,W);F.framebufferTexture2D(Ra.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,na,0)},lc:N.lc,resize:function(E,V){U=E;W=V;Z()},clone:function(E){E=N.instance({width:U,height:W,G:x.G,isFloat:x.isFloat,isLinear:x.isLinear,isMirrorY:x.isMirrorY,isFlipY:E?!ta:ta,isPot:x.isPot});Oa.set("s0");Ra.X();
E.u();F.viewport(0,0,U,W);ea.g(0);R.l(!0,!0);return E},Df:function(){F.viewport(0,0,U,W)},remove:function(){F.deleteTexture(na);Ya=!0;m.splice(m.indexOf(ea),1);ea=null},refresh:function(){ea.xc(0);ta&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);ba?F.texImage2D(F.TEXTURE_2D,0,ja,ha,ia,x.C):F.texImage2D(F.TEXTURE_2D,0,ja,U,W,0,ha,ia,oa);ta&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},ac:function(){Ga||Y();F.readPixels(0,0,U,4*W,F.RGBA,F.UNSIGNED_BYTE,Ma);ca();return qa},lf:function(){Ga||Y();return Qa.bc(0,
0,U,4*W,Ma).then(function(){ca();return qa})},pf:function(){Ta||ma();F.readPixels(0,0,U,W,F.RGBA,F.UNSIGNED_BYTE,C);return Za},mf:function(){Ta||ma();return Qa.bc(0,0,U,W,C)},zb:function(E){Ra.L();I.set("s13");ea.g(0);if(E)F.viewport(0,0,U,W),I.Cf("u9",.25,.25,.25,.25),R.l(!1,!0);else for(E=0;4>E;++E)F.viewport(0,W*E,U,W),I.Fd("u9",L[E]),R.l(!1,0===E)},Pg:function(E){var V=ia===g[0]&&!q();a(na);ta&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);V?($a||(O=document.createElement("canvas"),O.width=U,O.height=
W,ra=O.getContext("2d"),Ua=ra.createImageData(U,W),$a=!0),Ua.data.set(E),ra.putImageData(Ua,0,0),F.texImage2D(F.TEXTURE_2D,0,ja,ha,ia,O)):F.texImage2D(F.TEXTURE_2D,0,ja,U,W,0,ha,ia,E);v[n]=B;ta&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},Qg:function(E,V){a(na);V&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);F.texImage2D(F.TEXTURE_2D,0,ja,ha,ia,E);v[n]=B;V&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},Eg:function(E,V){var ka=U*W,aa=4*ka;E=x.G?E?"RGBE":"JSON":"RGBA";V&&(E=V);V=Qa.$()&&!1;var za=null;switch(E){case "RGBE":za=
"s43";break;case "JSON":za=V?"s0":"s13";break;case "RGBA":case "RGBAARRAY":za="s7"}Ga||("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E?(wa=new Uint8Array(aa),Ga=!0):"JSON"!==E||V||Y());Ra.L();I.set(za);ea.g(0);aa=null;if("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E){F.viewport(0,0,U,W);R.l(!0,!0);F.readPixels(0,0,U,W,F.RGBA,F.UNSIGNED_BYTE,wa);if("RGBAARRAY"===E)return{data:wa};H||(P=document.createElement("canvas"),y=P.getContext("2d"),H=!0);P.width=U;P.height=W;ka=y.createImageData(U,W);ka.data.set(wa);y.putImageData(ka,
0,0);aa=P.toDataURL("image/png")}else if("JSON"===E)if(V)aa=new Float32Array(ka),F.viewport(0,0,U,W),R.l(!0,!0),F.readPixels(0,0,U,W,F.RGBA,F.FLOAT,aa);else{for(aa=0;4>aa;++aa)F.viewport(0,W*aa,U,W),I.Fd("u9",L[aa]),R.l(!aa,!aa);ea.ac();aa=Array(ka);for(V=0;V<ka;++V)aa[4*V]=qa[0][V],aa[4*V+1]=qa[1][V],aa[4*V+2]=qa[2][V],aa[4*V+3]=qa[3][V]}return{format:E,data:aa,width:U,height:W,isMirrorY:x.isMirrorY,isFlipY:"RGBA"===E?x.isFlipY:!x.isFlipY}}};x.isMipmap&&!ya&&Ea&&!La&&(ea.Bb(),La=!0);if(x.url)a(na),
F.texImage2D(F.TEXTURE_2D,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,null),xa=new Image,xa.Zf="Anonymous",xa.crossOrigin="Anonymous",xa.src=x.url,xa.onload=function(){U=xa.width;W=xa.height;Z()};else if(x.C){var ab=function(){M();U?Z():setTimeout(ab,1)};ab()}else x.array?(x.G&&!x.isFloat?x.array instanceof Uint16Array?(oa=x.array,Z()):l()?(oa=e(x.array),Z()):(Z(),N.Jc(F,na,ea.B(),ea.P(),x.array,ta,!0)):(oa=x.isFloat?x.array instanceof Float32Array?x.array:new Float32Array(x.array):x.array instanceof Uint8Array?
x.array:new Uint8Array(x.array),Z()),x.isKeepArray||(oa&&oa!==x.array&&(oa=null),delete x.array)):x.Pc?Ea=!0:Z();ea.pg=ea.B;x.ea&&Ea&&(x.ea(ea),x.ea=null);m.push(ea);return ea},L:function(f){f!==n&&(F.activeTexture(r[f]),n=f);v[f]=-1;a(null)},Tf:function(f){A.random.g(f)},lc:function(){D=null;F.framebufferTexture2D(Ra.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,null,0)},reset:function(){0!==n&&F.activeTexture(r[0]);for(var f=0;f<r.length;++f)v[f]=-1;n=-1},Dg:function(){n=-1},If:function(){for(var f=0;f<
r.length;++f)N.L(f)},Lc:function(){A&&(A.random.remove(),A.Md.remove())},Og:function(f,C){if("RGBA"===f.format||"RGBE"===f.format){var M=new Image;M.src=f.data;M.onload=function(){N.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,C:M,ea:function(S){if("RGBA"===f.format)C(S);else{var Z=f.width,ca=f.height,Y=N.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:Z,height:ca,isFlipY:f.isFlipY});Ra.X();F.viewport(0,0,Z,ca);I.set("s44");Y.u();S.g(0);R.l(!0,!0);N.L(0);C(Y);F.flush();setTimeout(S.remove,
50)}}})}}else"JSON"===f.format?C(N.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):C(!1)},he:e,m:function(){D&&(Ra.X(),N.lc(),Ra.L());N.If();m.slice(0).forEach(function(f){f.remove()});m.splice(0);k=!1;h=0;"undefined"!==typeof Pa&&Pa.m();A=null}};return N}(),Va={instance:function(a){var c=[T.instance(a),T.instance(a)],e=[c[1],c[0]],l=e,q={Dd:function(p){l[1].u();l[0].g(p);q.Jd()},Fg:function(p){l[1].R();l[0].g(p);q.Jd()},Jd:function(){l=l===c?
e:c},refresh:function(){l[0].refresh();l[1].refresh()},g:function(p){l[0].g(p)},Sf:function(p){l[1].g(p)},He:function(){return l[0]},ng:function(){return l[1]},remove:function(){l[0].remove();l[1].remove();l=null}};return q}},R=function(){function a(h){var v={W:null,F:null};v.W=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,v.W);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);v.F=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,v.F);h.bufferData(h.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),h.STATIC_DRAW);return v}var c=null,e=0,l=!1,q=[],p=-2,n=-2,r={reset:function(){n=p=-2},s:function(){l||(c=a(F),r.ub(),l=!0)},instance:function(h){var v=e++,A=h.F?h.F.length:0,D="undefined"===typeof h.mode?F.STATIC_DRAW:h.mode,g=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,g);F.bufferData(F.ARRAY_BUFFER,h.W instanceof Float32Array?h.W:new Float32Array(h.W),D);p=v;var t=null,w=null,k=null;if(h.F){t=F.createBuffer();F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,t);var m=null;65536>h.F.length?
(m=Uint16Array,w=F.UNSIGNED_SHORT,k=2):(m=Uint32Array,w=F.UNSIGNED_INT,k=4);m=h.F instanceof m?h.F:new m(h.F);F.bufferData(F.ELEMENT_ARRAY_BUFFER,m,D);n=v}var J={be:function(H){p!==v&&(F.bindBuffer(F.ARRAY_BUFFER,g),p=v);H&&Oa.dc()},Zd:function(){n!==v&&(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,t),n=v)},bind:function(H){J.be(H);J.Zd()},$f:function(){F.drawElements(F.TRIANGLES,A,w,0)},ag:function(H,P){F.drawElements(F.TRIANGLES,H,w,P*k)},remove:function(){F.deleteBuffer(g);h.F&&F.deleteBuffer(t);J=null}};
q.push(J);return J},ub:function(){-1!==p&&(F.bindBuffer(F.ARRAY_BUFFER,c.W),p=-1);-1!==n&&(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,c.F),n=-1)},l:function(h,v){h&&R.ub();v&&Oa.hb();F.drawElements(F.TRIANGLES,3,F.UNSIGNED_SHORT,0)},Na:function(h){h=h||F;var v=a(h);h.bindBuffer(h.ARRAY_BUFFER,v.W);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,v.F);Oa.ib(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);
h.deleteBuffer(v.W);h.deleteBuffer(v.F);r.reset();l&&(r.ub(),Oa.hb())},Lc:function(){var h=F,v=c;h.deleteBuffer(v.W);h.deleteBuffer(v.F)},m:function(){r.Lc();q.forEach(function(h){h.remove()});F.bindBuffer(F.ARRAY_BUFFER,null);F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,null);r.reset();l=!1;q.splice(0);e=0}};return r}(),Ra=function(){var a=null,c=null,e=null,l=!1,q=[],p={D:-2,Ic:1},n={Za:function(){return l},s:function(){if(!l){a=F.createFramebuffer();var r=Qa.$();c=r&&F.DRAW_FRAMEBUFFER?F.DRAW_FRAMEBUFFER:
F.FRAMEBUFFER;e=r&&F.READ_FRAMEBUFFER?F.READ_FRAMEBUFFER:F.FRAMEBUFFER;l=!0}},kg:function(){return c},Fe:function(){return e},Ra:function(){return F.FRAMEBUFFER},og:function(){return p},dg:function(){return a},instance:function(r){void 0===r.Xc&&(r.Xc=!1);var h=r.qa?r.qa:null,v=r.width,A=void 0!==r.height?r.height:r.width,D=a,g=null,t=!1,w=!1,k=0;h&&(v=v?v:h.B(),A=A?A:h.P());var m={Cd:function(){t||(D=F.createFramebuffer(),t=!0,k=p.Ic++)},Ud:function(){m.Cd();m.u();g=F.createRenderbuffer();F.bindRenderbuffer(F.RENDERBUFFER,
g);F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,v,A);F.framebufferRenderbuffer(c,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,g);F.clearDepth(1)},bind:function(J,H){k!==p.D&&(F.bindFramebuffer(c,D),p.D=k);h&&h.u();H&&F.viewport(0,0,v,A);J&&F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)},Rf:function(){k!==p.D&&(F.bindFramebuffer(c,D),p.D=k)},clear:function(){F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)},Xf:function(){F.clear(F.COLOR_BUFFER_BIT)},Yf:function(){F.clear(F.DEPTH_BUFFER_BIT)},Df:function(){F.viewport(0,
0,v,A)},u:function(){k!==p.D&&(F.bindFramebuffer(c,D),p.D=k)},rtt:function(J){h=J;p.D!==k&&(F.bindFramebuffer(F.FRAMEBUFFER,D),p.D=k);J.u()},L:function(){F.bindFramebuffer(c,null);p.D=-1},resize:function(J,H){v=J;A=H;g&&(F.bindRenderbuffer(F.RENDERBUFFER,g),F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,v,A))},remove:function(){D===a||w||(F.bindFramebuffer(c,D),F.framebufferTexture2D(c,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,null,0),g&&F.framebufferRenderbuffer(c,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,
null),F.bindFramebuffer(c,null),F.deleteFramebuffer(D),g&&F.deleteRenderbuffer(g));w=!0}};r.Xc&&m.Ud();q.push(m);return m},L:function(){F.bindFramebuffer(c,null);p.D=-1},Jf:function(){F.bindFramebuffer(c,null);F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT);Qa.Hd();p.D=-1},reset:function(){p.D=-2},X:function(){0!==p.D&&(F.bindFramebuffer(c,a),p.D=0)},clear:function(){Qa.Hd();F.clear(F.COLOR_BUFFER_BIT)},m:function(){n.L();q.forEach(function(r){r.remove()});null!==a&&(F.deleteFramebuffer(a),a=null);
n.reset();l=!1;q.splice(0);p.Ic=1}};return n}(),Qa=function(){function a(){l="undefined"===typeof Sa?JEContext:Sa;q=!0}function c(k,m){for(var J=0;J<k.length;++J){var H=m.getExtension(k[J]);if(H)return H}return null}function e(){null!==g.mb&&(clearInterval(g.mb),g.mb=null);g.wa=!1}var l=null,q=!1,p={Yc:!1,fc:null,hc:null,ad:!1,Xe:!1,ic:null,bd:!1,jc:null,Zc:!1,vb:null,Re:!1,wb:null,Se:!1},n=null,r={Y:!0,Z:!0,Ab:!0,ud:!1},h=null,v=!0,A=null,D=null,g={wa:!1,la:null,Va:null,Fb:-1,S:null,mb:null},t="undefined"===
typeof window?{}:window,w={s:function(){if(q)return!0;w.reset();q||a();var k=F;if(!n.Yc){n.fc=w.Fc(k);t.GL_EXT_FLOAT=n.fc;n.ad=n.fc?!0:!1;if(n.ad||w.$())n.hc=w.Gc(k),n.Xe=n.hc?!0:!1,t.GL_EXT_FLOATLINEAR=n.hc;n.Yc=!0}if(!n.Zc){n.ic=w.La(k);n.ic&&(n.bd=!0,t.GL_EXT_HALFFLOAT=n.ic);if(n.bd||w.$())n.jc=w.Hc(k),t.GL_EXT_HALFFLOATLINEAR=n.jc;n.ug=n.jc?!0:!1;n.Zc=!0}n.vb=w.Dc(k);n.Re=n.vb?!0:!1;t.GL_EXT_COLORBUFFERFLOAT=n.vb;n.wb=w.Ec(k);n.Se=n.wb?!0:!1;t.GL_EXT_COLORBUFFERHALFFLOAT=n.wb;Ra.s();T.s();if(!w.oe())return!1;
R.s();T.Oe();return!0},reset:function(){n=Object.assign({},p);h=Object.assign({},r)},B:function(){q||a();return l.B()},P:function(){q||a();return l.P()},$:function(){q||a();return l.$()},Cc:function(k){w.Dc(k);w.Ec(k);w.Fc(k);w.Gc(k);w.La(k);w.Hc(k)},Dc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Ec:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Fc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float",
"WEBKIT_OES_texture_float"]),Gc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),La:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Hc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Cb:function(k){var m=w.La(k);return m&&m.HALF_FLOAT_OES?m.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},Ce:function(){return D||F.RGBA32F||F.RGBA},
De:function(){return A||F.RGBA16F||F.RGBA},ze:function(){return h},Ac:function(){return h.Y},Wf:function(){return h.Z},Vf:function(){return h.Ab},de:function(){return h.ud&&v},Ld:function(k){v=k;!k&&g.wa&&(F.deleteSync(g.Va),F.bindBuffer(g.S,null),g.wa=!1)},kb:function(k,m,J){function H(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(P,null);k.deleteTexture(Q);k.deleteFramebuffer(L)}var P=k.FRAMEBUFFER,y=k.NEAREST,L=k.createFramebuffer();k.bindFramebuffer(P,L);var Q=k.createTexture();k.activeTexture(k.TEXTURE0);
k.bindTexture(k.TEXTURE_2D,Q);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,y);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,y);k.texImage2D(k.TEXTURE_2D,0,m,3,3,0,k.RGBA,J,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,Q,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return H(),
!1;Oa.cc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);R.Na(k);k.bindFramebuffer(P,null);Oa.Aa(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,Q);R.Na(k);m=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,m);H();for(J=0;36>J;++J)if(3!==J%4&&3<Math.abs(m[J]-127))return!1;return!0},yb:function(k){var m={Y:!1,Z:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&w.kb(k,k.RGBA32F,k.FLOAT)&&(m.Y=
!0,D=k.RGBA32F);!m.Y&&w.kb(k,k.RGBA,k.FLOAT)&&(m.Y=!0,D=k.RGBA);var J=w.Cb(k);A=null;k.RGBA16F&&w.kb(k,k.RGBA16F,J)&&(m.Z=!0,A=k.RGBA16F);!m.Z&&w.kb(k,k.RGBA,J)&&(m.Z=!0,A=k.RGBA);return m},pe:function(){var k=Ra.instance({width:2});k.Cd();var m=T.instance({width:2,isFloat:!0,bb:3});k.u();m.u();F.flush();F.checkFramebufferStatus(Ra.Fe())!==F.FRAMEBUFFER_COMPLETE?(T.zf(),h.Ab=!1):h.Ab=!0;k.remove();m.remove()},qe:function(){var k=!1;w.$()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(m){return"undefined"!==
typeof F[m]}));h.ud=k},oe:function(){var k=w.yb(F);Object.assign(h,k);if(!h.Y&&!h.Z)return!1;w.pe();w.qe();return!0},bc:function(k,m,J,H,P){if(!w.de())return F.readPixels(k,m,J,H,F.RGBA,F.UNSIGNED_BYTE,P),Promise.resolve(P);null===g.la&&(g.S=F.PIXEL_PACK_BUFFER,g.la=F.createBuffer(),g.Fb=-1);F.bindBuffer(g.S,g.la);P.byteLength!==g.Fb&&(F.bufferData(g.S,P.byteLength,F.STREAM_READ),g.Fb=P.byteLength);F.readPixels(k,m,J,H,F.RGBA,F.UNSIGNED_BYTE,0);g.Va=F.fenceSync(F.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();
return new Promise(function(y,L){function Q(){if(!g.wa)return e(),L(),!1;switch(F.clientWaitSync(g.Va,0,0)){case F.TIMEOUT_EXPIRED:case F.WAIT_FAILED:return!1;default:return e(),F.deleteSync(g.Va),F.getBufferSubData(g.S,0,P),F.bindBuffer(g.S,null),y(P),!0}}e();g.wa=!0;Q()||(g.mb=setInterval(Q,0))})},Hd:function(){F.viewport(0,0,w.B(),w.P())},m:function(){e();T.m();Ra.m();R.m();null!==g.la&&(F.deleteBuffer(g.la),g.la=null);Oa.reset();q=!1}};return w}(),Pa=function(){function a(L,Q,u,d){m.texParameteri(m.TEXTURE_2D,
m.TEXTURE_MIN_FILTER,d?m.NEAREST_MIPMAP_NEAREST:m.LINEAR);var z=null;if(null!==u)try{z=m.getError();if("FUCKING_BIG_ERROR"===z)return!1;m.texImage2D(m.TEXTURE_2D,0,L,4,4,0,m.RGBA,Q,u);z=m.getError();if(z!==m.NO_ERROR)return!1}catch(G){return!1}d&&m.generateMipmap(m.TEXTURE_2D);m.clear(m.COLOR_BUFFER_BIT);R.Na(m);z=m.getError();if("FUCKING_BIG_ERROR"===z)return!1;m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,A);z=m.getError();z===m.INVALID_OPERATION&&"undefined"!==typeof m.PIXEL_PACK_BUFFER&&(m.bindBuffer(m.PIXEL_PACK_BUFFER,
null),m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,A),z=m.getError());if(z!==m.NO_ERROR)return!1;u=!0;for(d=0;16>d;++d)u=u&&4>Math.abs(A[d]-127);u&&(h.nd=Q,h.Wc=L);return u}function c(L,Q){return J.Y&&a(L,m.FLOAT,new Float32Array(D),Q)?(r=n.sc,!0):!1}function e(L,Q,u){if(!J.Z)return!1;var d=T.he(D),z=Qa.La(m);if(z&&z.HALF_FLOAT_OES&&a(L,z.HALF_FLOAT_OES,d,Q)||m.HALF_FLOAT&&a(L,m.HALF_FLOAT,d,Q))return r=n.sa,!0;d=new Float32Array(D);if(a(L,m.FLOAT,d,Q))return r=n.sa,!0;m.bindTexture(m.TEXTURE_2D,u);
m.texImage2D(m.TEXTURE_2D,0,m.RGBA,2,2,0,m.RGBA,m.UNSIGNED_BYTE,null);m.bindFramebuffer(h.Ja,y);T.Jc(m,u,2,2,d,!1,!1);m.bindFramebuffer(h.Ja,null);m.bindTexture(m.TEXTURE_2D,u);return a(L,null,null,Q)?(r=n.sa,!0):!1}function l(L,Q,u){v=!0;if(e(L,!0,u)||c(Q,!0))return!0;v=!1;return e(L,!1,u)||c(Q,!1)?!0:!1}function q(L){if(r===n.M){m=L||F;r=n.RGBA8;v=!0;Qa.Cc(m);J||(J=Qa.yb(m));Ra.reset();y=m.createFramebuffer();h.Ja=m.DRAW_FRAMEBUFFER||m.FRAMEBUFFER;m.bindFramebuffer(h.Ja,null);m.clearColor(0,0,0,
0);m.viewport(0,0,2,2);I.M();H=I.Aa(m);L=m.createTexture();m.activeTexture(m.TEXTURE0);m.bindTexture(m.TEXTURE_2D,L);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);P=L;var Q=L=m.RGBA,u=m.RGBA16F,d=m.RGBA32F;d&&(L=d);u&&(Q=u);if((u||d)&&l(Q,L,P))return p(),!0;L=Q=m.RGBA;if(l(Q,L,P))return p(),!0;r=n.RGBA8;p();return!1}}function p(){m.deleteProgram(H.ga);m.deleteTexture(P);P=
H=null}for(var n={M:-1,sc:3,sa:2,RGBA8:0},r=n.M,h={nd:null,Wc:null,Ja:null},v=!0,A=new Uint8Array(16),D=Array(64),g=0;4>g;++g)for(var t=0;4>t;++t){var w=0===(t+g)%2?1:0,k=4*g+t;D[4*k]=w;D[4*k+1]=w;D[4*k+2]=w;D[4*k+3]=w}var m=null,J=null,H=null,P=null,y=null;return{ce:function(L){q(L);return v},zc:function(L,Q){r===n.M&&(typeof("undefined"!==Q)&&(J=Q),q(L));return r!==n.RGBA8},xg:function(L){q(L);return r===n.sc},Ye:function(L){q(L);return r===n.sa},lg:function(L){q(L);return h.nd},Ee:function(L){q(L);
return h.Wc},m:function(){m=null;v=!0;r=n.M;J=null}}}(),Wa={instance:function(a){var c=T.instance(a.alpha),e=T.instance(a.beta);return{se:function(){c.g(1);e.g(2)}}}},cb={instance:function(a){var c=null,e=!1,l=!1,q=null,p=!1,n=!1,r=null,h="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(e=!0,b&&void 0!==b.Yd&&(a.mask=b.Yd+a.mask),c=T.instance({isFloat:!1,url:a.mask}));var A=!1;a.customInputShader&&(A="s45",I.tc({name:"_",
id:A,h:a.customInputShader,Ng:["uSource"],precision:"lowp"}),I.I(A,[{type:"1i",name:"_",value:0}]));switch(h){case "sobel":r="s32";p=!0;break;case "meanNormalization":r="s33";p=!0;break;case "grayScale":r="s29";p=!1;break;case "grayScaleTilt":r="s30";n=!0;p=!1;break;case "rgbGrayTilt":r="s31";n=!0;p=!1;break;case "copy":r=A?A:"s0";break;case "inputLightRegulation":r=A?A:"s29";q=Xa.instance({Vc:v,md:a.size,jd:a.nBlurPass,Ya:!1});l=!0;break;case "inputMix0":r="none";q=bb.instance({ja:v,Od:a.varianceMin,
yc:a.blurKernelSizePx,Ya:!1});l=!0;break;case "direct":case "none":r="abort";break;default:r="s4"}n&&I.I(r,[{name:"u27",type:"1f",value:a.tilt}]);e&&(r+="Mask");var D=T.instance({isFloat:!1,isPot:!1,width:a.size}),g={B:function(){return v},Db:function(){return g.B()},Le:function(){return l?q.Eb():D},J:function(t){Ra.X();"abort"!==r&&("none"!==r&&(I.set(r),p&&I.K("u28",1/a.size),D.R(),e&&c.g(1),R.l(!1,!1),D.g(0),t=D),l&&q.process(t))},m:function(){D.remove();e&&c.remove()}};return g}},ib={instance:function(a){function c(f){q.forEach(function(C,
M){p[M][0]=f[0][C];p[M][1]=f[1][C];p[M][2]=f[2][C];p[M][3]=f[3][C]});return p}"undefined"===typeof a.normalize&&(a.normalize=!1);var e={input:null,Ha:null,Jb:null,V:null,cb:null,Yb:null,Zb:null},l=null,q=[],p=[],n=!1,r=null,h=!0,v=-1,A=a.isReorganize?a.isReorganize:!1,D=a.kernelsCount?!0:!1,g=a.dynPelu?Wa.instance(a.dynPelu):!1,t=g?!0:!1,w={isEnabled:!1};a.We?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.fb.Db(),h=!1):"full"===a.connectivityUp&&(a.sparsity=a.fb.Db());var k={elu:"s16",elu01:"s17",
relu:"s15",arctan:"s19",sigmoid:"s14",copy:"s0",softplus:"s20",dynPelu:"s18"}[a.activation],m=a.sparsity*a.sparsity,J=!1,H=a.size,P="";if(a.maxPooling){switch(a.maxPooling.size){case 2:P="s34";break;case 4:P="s35"}J=!0;H/=a.maxPooling.size;e.Yb=T.instance({isFloat:!0,isPot:!1,width:H})}var y=void 0!==a.cf&&a.cf?!0:!1,L=null,Q=null,u=null;if(y){L="s46"+a.index.toString();I.Tc("s46",L,[((a.normalization.n-1)/2).toFixed(1)]);I.I(L,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/a.size,1/
a.size]},{type:"1f",name:"u7",value:a.normalization.alpha},{type:"1f",name:"u10",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var d={isFloat:!0,isPot:!0,width:a.size};Q=T.instance(d);u=T.instance(d)}var z=-1,G=null;h&&(e.V=T.instance({isFloat:!0,isPot:!1,width:a.size}));e.Ha=T.instance(a.bias);var N={B:function(){return a.size},Db:function(){return H},Mc:function(){return a.classesCount},$d:function(f){l.g(f)},gf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,
Ze:T.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),ab:a.remap.layers.map(function(f){return a.parent.Ie(f)}),depth:a.remap.depth})},Af:function(){switch(a.connectivityUp){case "direct":G=db.instance(a.connectivity);break;case "square":G=eb.instance(a.connectivity);break;case "squareFast":G=fb.instance(a.connectivity,a.activation);break;case "full":G=gb.instance(a.connectivity);break;case "conv":v=a.kernelsCount,G=hb.instance(a.connectivity),
A&&(e.cb=T.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}if(G.pa){var f=a.size*a.sparsity;z=Math.log(f/a.size)/Math.log(2);e.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:f,Rb:z});e.Jb=T.instance({isFloat:!0,isPot:!0,width:a.size})}},J:function(f,C){l=f;G.pa?(e.input.R(),D&&e.Ha.g(2),G.J(w),e.input.g(0),e.input.ye(z),e.Jb.R(),D?I.set("s0"):(I.set("s28"),I.K("u26",m),e.Ha.g(1)),e.input.ae(z,0),R.l(!1,!1),I.set(k),y?Q.u():e.V.u(),e.Jb.g(0),t&&g.se(),R.l(!1,!1)):(e.V.R(),e.Ha.g(1),G.J());
y&&(I.set(L),u.u(),Q.g(0),R.l(!1,!1),I.set("s47"),I.K("u7",1),e.V.u(),u.g(1),R.l(!1,!1));if(h)return J?(e.Yb.R(),e.V.g(0),I.set(P),I.ha("u8",1/a.size,1/a.size),R.l(!1,!1),C=e.Yb):C=e.V,C.g(0),A&&(e.cb.u(),I.set("s22"),I.ha("u13",v,H/v),R.l(!1,!1),C=e.cb,e.cb.g(0)),C;var M=e.V;a.normalize&&(I.set("gpuRawAvg"===n?"s9":"s8"),I.K("u4",1/a.size),e.Zb.R(),e.V.g(0),R.l(!1,!1),M=e.Zb);f=null;switch(n){case "cpuRGBA2Float":M.zb(!1);C?f=N.jf(M).then(r):(M=N.kf(M),r(M));break;case "cpuMeanFloat":M.zb(!0);C?
f=M.mf().then(r):(M=M.pf(),r(M));break;case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==r&&r(M)}C&&null===f&&(f=Promise.resolve());return f},ie:function(f){f&&(n=f.$b||"none",r=f.Xb||null);e.V=T.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});f="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var C=0,M=0,S=0;C<f;++C)q.push(M+(a.size-1-S)*a.size),p.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++S);a.normalize&&(e.Zb=T.instance({isFloat:!0,isPot:!0,width:a.size}))},
jf:function(f){return f.lf().then(c)},kf:function(f){f=f.ac();c(f);return p},m:function(){for(var f in e){var C=e[f];C&&C.remove()}G&&(G.m(),G=null)}};a.fb&&N.Af(a.fb);return N}};
function jb(a){var c=null,e=null,l=null,q=0;this.s=function(p){this.yf(p.ab);l.ie({$b:p.$b,Xb:p.Xb})};this.Ie=function(p){return c[p]};this.yf=function(p){var n=null;q=p.length;c=p.map(function(r,h){r=Object.assign({},r,{index:h,parent:this,fb:n,We:h===q-1});return n=h=0===h?cb.instance(r):ib.instance(r)});e=c[0];l=c[q-1];c.forEach(function(r,h){0!==h&&r.gf()})};this.J=function(p){var n=p;c.forEach(function(r){n=r.J(n,!1)});return n};this.Ge=function(){return e.B()};this.Me=function(){return l.B()};
this.Eb=function(){return l.Le()};this.Mc=function(){return l.Mc()};this.m=function(){c&&(c.forEach(function(p){p.m()}),l=e=c=null,q=0)};"undefined"!==typeof a&&this.s(a)}
var db={instance:function(a){var c=T.instance(a.weights);return{pa:!0,Qa:function(){return 1},m:function(){c.remove()},Ne:function(){return c},J:function(){I.set("s27");c.g(1);R.l(!1,!1)}}}},gb={instance:function(a){var c=a.fromLayerSize,e=T.instance(a.weights);return{pa:!0,Qa:function(){return c},m:function(){e.remove()},J:function(l){if(l.isEnabled){I.set("s25");l.Ze.g(3);var q,p=Math.min(l.ab.length,l.depth);for(q=0;q<p;++q)l.ab[q].$d(4+q)}else I.set("s24");I.K("u17",a.toLayerSize);e.g(1);R.l(!1,
!1)}}}},eb={instance:function(a){for(var c=a.fromLayerSize,e=a.toLayerSize,l=a.toSparsity,q=l*e,p=q/c,n=c/e,r=0,h=0,v=0,A=Array(l*e*l*e*4),D=Array(l*e*l*e*4),g=Array(c*c),t=0;t<g.length;++t)g[t]=0;t=Math.floor(l/2);for(var w=.5/e,k=.5/c,m=.5/q,J=0;J<e;++J)for(var H=Math.round(J*n),P=0;P<e;++P){var y=Math.round(P*n),L=J/e,Q=P/e;L+=w;Q+=w;for(var u=0;u<l;++u){var d=H+u-t;0>d&&(d+=c);d>=c&&(d-=c);for(var z=0;z<l;++z){var G=r/q,N=h/q,f=y+z-t;0>f&&(f+=c);f>=c&&(f-=c);var C=d/c,M=f/c;N=1-N-1/q;C+=k;M+=
k;G+=m;N+=m;var S=J*l+u,Z=P*l+z;Z=e*l-Z-1;S=Z*e*l+S;A[4*S]=G;A[4*S+1]=N;A[4*S+2]=C;A[4*S+3]=M;M=g[f*c+d]++;S=M%p;C=d*p+S;f=f*p+(M-S)/p;f=c*p-1-f;f=f*c*p+C;D[4*f]=G;D[4*f+1]=N;D[4*f+2]=L;D[4*f+3]=Q;++r>=q&&(r=0,++h);++v}}}g=null;var ca=T.instance(a.weights);delete a.weights.data;var Y=T.instance({width:q,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;var ma=T.instance({width:q,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;return{pa:!0,Qa:function(){return p},m:function(){Y.remove();
ma.remove();ca.remove()},J:function(){I.set("s23");ca.g(1);ma.g(2);R.l(!1,!1)}}}},hb={instance:function(a){var c=a.kernelsCount,e=a.toSparsity,l=e*a.toLayerSize/a.fromLayerSize,q=T.instance(a.weights);return{pa:!0,Qa:function(){return l},rg:function(){return e},Ne:function(){return q},m:function(){q.remove()},J:function(){I.set("s26");I.K("u23",c);I.K("u24",e);I.K("u17",a.toLayerSize);I.K("u25",a.fromLayerSize);q.g(1);R.l(!1,!1)}}}},fb={instance:function(a,c){var e=a.fromLayerSize,l=a.toLayerSize,
q=a.toSparsity,p=a.stride?a.stride:1,n=q*l/e,r=l<e,h=e/l,v=T.instance(a.weights),A="s48"+[e.toString(),l.toString(),q.toString(),p.toString(),c].join("_");I.we(A)||(a=Ia(c),l=[{type:"1f",name:"u17",value:l},{type:"1f",name:"u30",value:p}],r&&l.push({type:"1f",name:"u25",value:e}),e=[(r?n:q).toFixed(1),a],r&&e.push(h.toFixed(1)),I.Tc(r?"s40":"s39",A,e),I.I(A,l.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{pa:!1,Qa:function(){return n},
m:function(){v.remove()},J:function(){I.set(A);v.g(3);R.l(!1,!1)}}}},Xa={instance:function(a){var c=a.jd?a.jd:3,e=a.Vc?a.Vc:64,l=a.md?a.md:64,q=a.Ya?!0:!1;a={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var p=T.instance(a),n=T.instance(a),r=T.instance(a),h=T.instance(a),v=T.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),A=1/e;return{process:function(D){I.set("s36");h.u();R.l(q,!1);I.set("s37");for(var g=0;g<c;++g)p.u(),I.ha("u8",A,0),R.l(q,!1),r.u(),h.g(0),R.l(q,!1),n.u(),p.g(0),I.ha("u8",0,A),R.l(q,
!1),h.u(),r.g(0),R.l(q,!1),g!==c-1&&n.g(0);I.set("s38");v.u();D.g(0);n.g(1);h.g(2);R.l(q,!1);v.g(0)},Eb:function(){return v}}}},bb={instance:function(a){function c(v){return T.instance({isFloat:v,width:e.ja,isPot:!1,isFlipY:!1})}var e=Object.assign({Od:.1,yc:9,ja:128,Ya:!1},a),l=c(!1),q=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],n=c(!0),r=[l,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((e.yc-1)/2).toFixed(2)).replace("2.2222",(1/e.ja).toFixed(6));var h={u1:0};I.uc([{id:"s50",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:h,i:["u1"],precision:"lowp"},{id:"s51",name:"_",h:a,j:h,i:["u1","u32"],precision:"lowp"},{id:"s52",name:"_",h:"uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,h=texture2D(u36,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
e.Od.toFixed(4)),j:{u33:0,u34:1,u35:2,u36:3},i:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){I.set("s50");l.R();R.l(e.Ya,!1);I.set("s51");for(var v=0;3>v;++v)I.ha("u32",1,0),q[v].u(),r[v].g(0),R.l(!1,!1),I.ha("u32",0,1),p[v].u(),q[v].g(0),R.l(!1,!1);I.set("s52");n.u();l.g(0);p[0].g(1);p[1].g(2);p[2].g(3);R.l(!1,!1);n.g(0)},Eb:function(){return n}}}};function kb(a,c){a[c]=!0;a.setAttribute(c,"true")}
function lb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function mb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function nb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function pb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function qb(a){if(!a)return a;var c=null;if(a.video){var e=function(l){return l&&"object"===typeof l?Object.assign({},l):l};c={};"undefined"!==typeof a.video.width&&(c.width=e(a.video.width));"undefined"!==typeof a.video.height&&(c.height=e(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=e(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&rb(c,a.deviceId);return c}
function rb(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}function tb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function ub(a){function c(g){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(t,w){return Math.abs(t-g)-Math.abs(w-g)})}function e(g){var t=qb(a);g=g(t);q.push(g);l(g)}function l(g){if(g.video&&g.video.facingMode&&g.video.facingMode.exact){var t=g.video.facingMode.exact;g=qb(g);delete g.video.facingMode.exact;g.video.facingMode.ideal=t;q.push(g)}}var q=[];if(!a||!a.video)return q;l(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),r={},h=0;for(r.da=void 0;h<p.length;r={da:r.da},++h){r.da=p[h];var v={},A=0;for(v.ca=void 0;A<n.length;v={ca:v.ca},++A)if(v.ca=n[A],r.da!==a.video.width.ideal||v.ca!==a.video.height.ideal){var D=Math.max(r.da,v.ca)/Math.min(r.da,v.ca);D<4/3-.1||D>16/9+.1||e(function(g,t){return function(w){w.video.width.ideal=g.da;w.video.height.ideal=t.ca;return w}}(r,v))}}}e(function(g){return tb(g)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&e(function(g){delete g.video.width.ideal;delete g.video.height.ideal;return g}),e(function(g){delete g.video.width;delete g.video.height;return g}));a.video.facingMode&&(e(function(g){delete g.video.facingMode;return g}),a.video.width&&a.video.height&&e(function(g){tb(g);delete g.video.facingMode;return g}));q.push({audio:a.audio,video:!0});return q}
function vb(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var e=a.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(a.video.height=c,a.video.width=e)}}
function wb(a){a.volume=0;kb(a,"muted");if(nb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;kb(a,"muted")},5)}}
function xb(a,c,e,l){function q(n){p||(p=!0,e(n))}var p=!1;navigator.mediaDevices.getUserMedia(l).then(function(n){function r(){setTimeout(function(){if(a.currentTime){var v=a.videoWidth,A=a.videoHeight;if(0===v||0===A)q("VIDEO_NULLSIZE");else{v&&(a.style.width=v.toString()+"px");A&&(a.style.height=A.toString()+"px");v={ee:null,Ef:null,$e:null};try{var D=n.getVideoTracks()[0];D&&(v.$e=D,v.ee=D.getCapabilities(),v.Ef=D.getSettings())}catch(g){}nb()||lb()?a.parentNode&&null!==a.parentNode?(p||c(a,n,
v),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),wb(a),p||c(a,n,v),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";wb(a);setTimeout(function(){a.play()},100)},80)):p||c(a,n,v)}}else q("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var v=a.play();wb(a);"undefined"===typeof v?r():v.then(function(){r()}).catch(function(){q("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==
typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);wb(a);a.addEventListener("loadeddata",h,!1)}).catch(function(n){q(n)})}
function yb(a,c,e){var l=pb()?document.createElement("video"):!1;if(l)if(pb()){if(e&&e.video){if(lb()){var q=mb();0!==q[0]&&(12>q[0]||12===q[0]&&2>q[1])&&vb(e)}e.video.width&&e.video.width.ideal&&(l.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(l.style.height=e.video.height.ideal+"px")}kb(l,"autoplay");kb(l,"playsinline");e&&e.audio?l.volume=0:kb(l,"muted");xb(l,a,function(){function p(r){if(0===r.length)c("INVALID_FALLBACKCONSTRAINTS");else{var h=r.shift();xb(l,a,function(){p(r)},
h)}}var n=ub(e);p(n)},e)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var zb=function(){function a(t,w,k,m,J,H){if(H===J.length)m();else{switch(J[H]){case "D":t();break;case "S":w().then(function(){g.Kd();a(t,w,k,m,J,++H)}).catch(function(P){m();throw P;});return;case "R":k()}a(t,w,k,m,J,++H)}}var c={n:5,Tb:1,gd:0,Oa:[35,49],Ka:[2,200],k:.7,Lf:200,ff:.05},e=-1,l=null,q=-1,p=-1,n=0,r=-1,h=-1,v=0,A=0,D=c.Ka[1],g={Je:function(){switch(e){case -1:return-1;case 0:return h+l.gd;case 1:return v}},Ae:function(t){return Math.pow(Math.min(Math.max(r,0),l.n-1)/(l.n-1),t||1)},
s:function(t){l=Object.assign({},c,t);r=h=l.Tb;e=0;g.reset()},Kd:function(t){t=("undefined"===typeof t?Date.now():t)||0;var w=Math.min(Math.max(t-A,l.Ka[0]),l.Ka[1]);D=w;A=t;var k=-1===q?0:l.k;q=Math.min(Math.max(1E3/w,5),120)*(1-k)+q*k;t-p>l.Lf&&5<++n&&(w=l.k,r=r*(1-w)+(q<l.Oa[0]?h-1:q>l.Oa[1]?h+1:h)*w,Math.abs(r-h)>1-l.ff&&(w=Math.min(Math.max(Math.round(r),0),l.n-1),w!==h&&(r=h=w,q=(l.Oa[1]-l.Oa[0])/2)),p=t)},wd:function(t,w,k,m,J){a(t,w,k,m,J,0)},xf:function(t){v=t;e=1},Kf:function(){e=0;g.reset()},
reset:function(){D=c.Ka[1];p=q=-1;n=0},ig:function(){return D}};return g}(),Ab=function(){var a={kd:4,eb:[1.5,1.5,2],ia:[.1,.1,.1],yd:1,ja:-1,Gb:-1,Gf:2,ef:1,Ad:!0,ue:.8},c=null,e=[],l=0,q=[.5,.5,1];return{s:function(p){c=Object.assign({},a,p);e.splice(0);p=c.eb[0]*c.ia[0];var n=c.eb[1]*c.ia[1],r=1/(1+c.eb[2]*c.ia[2]),h=c.yd*Math.min(c.ja,c.Gb),v=h/c.ja;h/=c.Gb;var A=.5*c.ue;A*=A;for(var D=0;D<c.kd;++D){var g=Math.pow(r,D),t=v*g,w=h*g;g=t*c.ef;var k=t*p,m=w*n;t/=2;w/=2;for(var J=1+(1-t-t)/k,H=1+(1-
w-w)/m,P=0;P<H;++P)for(var y=w+P*m,L=y-.5,Q=0;Q<J;++Q){var u=t+Q*k,d=u-.5;d*d+L*L>A||e.push([u,y,g])}}c.Ad&&e.sort(function(z,G){var N=z[0]-.5;z=z[1]-.5;var f=G[0]-.5;G=G[1]-.5;return N*N+z*z-(f*f+G*G)})},get:function(){var p=e.length;if(0===p)return q;l>=p&&(l=0);var n=e[Math.floor(l)];l=(l+1/c.Gf)%p;return n}}}(),Bb=function(){function a(){e(k+t.Sb);m.port.postMessage("DONE")}function c(){var d=t.N;y.isEnabled&&(d=Math.max(d,y.N));P.Fa=0===d?window.requestAnimationFrame(e):window.requestAnimationFrame(l)}
function e(d){H.ma&&null!==w&&(d-=k,d=Math.min(Math.max(d,t.Bc[0]),t.Bc[1]),k+=d,p(),y.isEnabled&&y.xa&&H.U&&k-y.Ob>t.qc&&(v(),y.Ob=k),w(k))}function l(d){H.ma&&(P.timeout=window.setTimeout(e.bind(null,d),t.N))}function q(){w=null;H.ma=!1;p()}function p(){P.Fa&&(window.cancelAnimationFrame(P.Fa),P.Fa=null);P.timeout&&(window.clearTimeout(P.timeout),P.timeout=null)}function n(d){d&&!H.U?(H.U=!0,J&&zb.Kf(),m.port.postMessage("STOP"),Qa.Ld(!0),c()):!d&&H.U&&(H.U=!1,J&&zb.xf(1),Qa.Ld(!1),m.port.postMessage("START"))}
function r(d){d.target.hidden?Q():L()}function h(d,z,G){z=d.createShader(z);d.shaderSource(z,G);d.compileShader(z);return z}function v(){y.xa=!1;var d=y.Sa,z=y.Ta,G=y.Ua,N=y.S;d.uniform1f(y.Qc,Math.random());y.na?z.beginQueryEXT(N,G):d.beginQuery(N,G);d.drawElements(d.POINTS,1,d.UNSIGNED_SHORT,0);y.na?z.endQueryEXT(N):d.endQuery(N);d.flush();D().then(function(f){f=t.Rd*t.oc*1E3/f;y.nb=(y.nb+1)%t.ra;y.Qb[y.nb]=f;if(++y.cd>t.ra){y.$a.set(y.Qb);y.$a.sort(function(M,S){return M-S});f=y.$a[Math.floor(t.ra/
2)];y.Ma=Math.max(y.Ma,f);var C=0;for(C=0;C<y.kc&&!(f>y.Ma*(1-(t.pc[C]+t.Sd*(C>=y.lb?1:-1))));++C)C===y.kc-1&&++C;C!==y.lb&&(console.log("THERMAL THROTTLING LEVEL = "+C.toString()),y.lb=C,y.N=0===C?0:t.Qd[C-1],t.nc&&t.nc(C))}y.xa=!0}).catch(function(){y.xa=!0})}function A(d){var z=y.Sa,G=y.Ta,N=y.Ua;N=y.na?G.cg(N,G.QUERY_RESULT_AVAILABLE_EXT):z.getQueryParameter(N,z.QUERY_RESULT_AVAILABLE);z=z.getParameter(G.GPU_DISJOINT_EXT);N?d(!z):setTimeout(A.bind(null,d),.1)}function D(){return new Promise(function(d,
z){A(function(G){if(G){G=y.Sa;var N=y.Ta,f=y.Ua;G=y.na?N.getQueryObjectEXT(f,N.QUERY_RESULT_EXT):G.getQueryParameter(f,G.QUERY_RESULT);d(G)}else z()})})}var g={$c:!0,Bc:[1,200],Sb:20,N:0,Td:!1,oc:50,Rd:240,qc:3E3,ra:3,pc:[.2,.35,.5],Sd:.05,Qd:[8,20,40],nc:null},t=null,w=null,k=0,m=null,J=!1,H={fa:!1,U:!0,Nb:!1,Mb:!1,Lb:!1,ma:!1},P={Fa:null,timeout:null},y={isEnabled:!1,xa:!1,Sa:null,Ta:null,Ua:null,S:null,Qc:null,na:!0,lb:0,kc:0,N:0,Ob:0,cd:0,Qb:null,$a:null,nb:0,Ma:0},L=n.bind(null,!0),Q=n.bind(null,
!1),u={s:function(d){t=Object.assign(g,d);Object.assign(H,{U:!0,fa:!0,ma:!1});if(t.Td){d=document.createElement("canvas");d.setAttribute("width","1");d.setAttribute("height","1");var z={antialias:!1};d=d.getContext("webgl2",z)||d.getContext("webgl",z);if(z=d.getExtension("EXT_disjoint_timer_query")||d.getExtension("EXT_disjoint_timer_query_webgl2")){y.Sa=d;y.Ta=z;y.isEnabled=!0;y.na=z.beginQueryEXT?!0:!1;var G=h(d,d.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),N=h(d,d.FRAGMENT_SHADER,
"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",t.oc.toString())),f=d.createProgram();d.attachShader(f,G);d.attachShader(f,N);d.linkProgram(f);G=d.getAttribLocation(f,"a0");y.Qc=d.getUniformLocation(f,"u37");d.useProgram(f);d.enableVertexAttribArray(G);f=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,f);d.bufferData(d.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),d.STATIC_DRAW);d.vertexAttribPointer(G,4,d.FLOAT,
!1,16,0);f=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,f);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),d.STATIC_DRAW);d.disable(d.DEPTH_TEST);d.disable(d.DITHER);d.disable(d.STENCIL_TEST);d.viewport(0,0,1,1);f=y.na?z.createQueryEXT():d.createQuery();y.Ua=f;y.S=z.TIME_ELAPSED_EXT||d.TIME_ELAPSED;y.lb=0;y.kc=t.pc.length;y.N=0;y.Ob=-t.qc;y.Qb=new Float32Array(t.ra);y.$a=new Float32Array(t.ra);y.Ma=0;y.nb=0;y.cd=0;y.xa=!0}}if(t.$c){d=!1;try{if("undefined"===typeof SharedWorker){var C=
URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+t.Sb.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],
{type:"text/javascript"})),M=new Worker(C);M.addEventListener("message",a);m={od:M,port:M};H.Nb=!0}else{var S=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
t.Sb.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),Z=new SharedWorker(S);Z.port.start();Z.port.addEventListener("message",a);m={od:Z,port:Z.port};H.Mb=!0}d=!0}catch(ca){}d&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",Q),window.addEventListener("focus",L)),H.Lb=!0)}J=
"undefined"!==typeof zb},m:function(){q();H.Lb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",Q),window.removeEventListener("focus",L)),H.Lb=!1);H.Mb?(m.port.close(),H.Mb=!1):H.Nb&&(m.od.terminate(),H.Nb=!1);Object.assign(H,{U:!0,fa:!1,ma:!1});w=null},Bg:function(){return H.U},update:function(d){Object.assign(t,d)},wd:function(d){H.fa||u.s({});p();H.ma=!0;w=d;H.U&&c()},stop:q};return u}(),Cb=function(){var a=0,c=null,e=null,
l=null,q=null;return{s:function(p,n){a=p.length;c=n;e=p;l=new Float32Array(a);q=new Float32Array(a)},Ke:function(){return q},Ff:function(p,n,r){p.forEach(function(h,v){var A=Math.min(1,e[v]*r*(n+.33*(1-n)));h=A*h+(1-A)*l[v];l[v]=h;h=c[v](h);h=Math.min(Math.max(h,0),1);q[v]=h})}}}(),X={VERSION:"1.3.0",ka:[],rb:!1,sb:!1,qb:!1,Ea:!0,Da:!1,ready:!1,initialized:!1},Db={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,isAudio:!0},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",
rc:"../../",N:0,width:512,height:512,Hf:30,zd:[.6,5.8],ia:[.06,.08,.15],wf:.7,uf:2,vf:[2,2,2],threshold:.7,te:.08,xe:.02,Wd:[.03,1],Pf:20,Qe:!1,pb:[2,7],H:{Rc:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},Vb:11,hd:1,af:1,vc:[.1,.01],sf:[.4,-.7,-.4],tf:[.3,0,0],re:!1,Xd:.001,wc:[Math.PI/10,Math.PI/6],qd:[.1,.4],rd:[.009,.02],sd:[.1,.2],Ub:5,Sc:.05,Vd:[.2,.2,.15,.15,.15,.15,1,.2,.15,.15,.2],bf:[Ha.bind(null,.1,.7),Ha.bind(null,.1,.7),Ha.bind(null,.05,.4),Ha.bind(null,.05,.4),Ha.bind(null,.05,.6),
Ha.bind(null,.05,.6),Ha.bind(null,.1,.5),Ha.bind(null,.3,.7),Ha.bind(null,.75,.85),Ha.bind(null,.75,.85),Ha.bind(null,.15,.6)]};X.get_nMorphs=function(){return b.Vb};var Eb=null,Fb=null,Gb=null,Hb=[];
function Ib(){function a(){1===++M&&(Cb.s(b.Vd,b.bf),c(),X.ready=!0,X.ka.forEach(function(B){B()}),X.ka.splice(0,X.ka.length),e(),M=0)}function c(){H=new Float32Array(b.Vb);P=new Float32Array(b.Vb);y=new Uint8Array(w*w*4);X.get_morphTargetInfluences=function(){return H};X.get_morphTargetInfluencesStabilized=function(){return Cb.Ke()};X.set_morphUpdateCallback=function(B){L=B};X.get_rotation=function(){return d};X.get_positionScale=function(){var B=m.Id.He();B.zb(!1);B=B.ac();N[0]=1-B[1][0];N[1]=B[2][0];
N[2]=B[3][0]*k[0];return N};X.get_rotationStabilized=function(){return G};X.switch_sleep=function(B){Z!==S.ec||B?Z=B?S.ec:S.play:e()};X.on_detect=function(B){B(ca.T);ca.Wb.push(B)};X.is_detected=function(){return ca.T};X.set_animateDelay=function(B){g=B;Bb.update({N:g})}}function e(){Z!==S.play&&(Z=S.play,Bb.stop(),l())}function l(){var B,K;return Aa(new va(new la(function(ba){switch(ba.aa){case 1:a:{if("VIDEO"===C.element.nodeName){var O=C.element.currentTime-ma;0>O&&(ma=C.element.currentTime);if(1E3*
O<b.Pf)break a;ma+=O}C.qa.refresh();O=x.Oc();O[0]===C.Ia[0]&&O[1]===C.Ia[1]||x.Nd()}B=zb.Je();K=0;case 2:if(!(K<B)){ba.aa=4;break}O=m;var ra=t;I.set("s54");Ra.X();O.Wa.R();C.qa.g(0);O.jb.g(1);R.l(!1,!1);O.Wa.g(0);ra.J(O.Wa);b.Qe?O=T.rf(Q,y).then(q):(T.qf(Q,y),q(),O=Promise.resolve());ba.aa=3;return{value:O};case 3:++K;ba.aa=2;break;case 4:O=m,Ra.X(),J.R(),I.set("s57"),O.jb.g(0),R.l(!1,!1),O=zb.Ae(),f=3*(1-O)+1*O,zb.Kd(),X.Ea&&(Ra.Jf(),I.set("s53"),C.qa.g(0),R.l(!1,!1),F.enable(F.BLEND),F.blendFunc(F.SRC_ALPHA,
F.ONE),J.g(0),R.l(!1,!1),F.disable(F.BLEND)),F.flush(),Z!==S.ec&&Bb.wd(l),ba.aa=0}})))}function q(){r();if(!b.re&&ca.T)for(var B=0;3>B;++B){var K=n(B+b.H.rotation[0],b.H.rotation[1]);K=(2*K-1)*b.sf[B];K+=b.tf[B];u[B]=K}p();B=Date.now();K=B-Y.ed;var ba=n(b.H.quality[0],b.H.quality[1]);Y.pd=Ha(b.qd[0],b.qd[1],ba);ba=n(b.H.position[0],b.H.position[1]);var O=n(b.H.position[0]+1,b.H.position[1]),ra=n(b.H.position[0]+2,b.H.position[1]);Y.xd=1-Ha(b.sd[0],b.sd[1],Math.sqrt(ba*ba+O*O+ra*ra)/K);ba=Y.oa[0]-
u[0];O=Y.oa[1]-u[1];ra=Y.oa[2]-u[2];K=Math.sqrt(ba*ba+O*O+ra*ra)/K;Y.oa[0]=u[0];Y.oa[1]=u[1];Y.oa[2]=u[2];Y.td=1-Ha(b.rd[0],b.rd[1],K);Y.O=Y.pd*Y.xd*Y.td;Y.ed=B;Y.dd[Y.Pb]=Y.O;Y.Pb=(Y.Pb+1)%b.Ub;for(B=0;B<b.Ub;++B)Y.O=Math.min(Y.dd[B],Y.O);Cb.Ff(H,Y.O,f,P);L&&L(Y.O,f);if(ca.T)for(B=b.vc[1]*Y.O+b.vc[0]*(1-Y.O),B*=f,K=0;3>K;++K)d[K]=B*u[K]+(1-B)*d[K],G[K]=d[K];else B=Date.now()*b.Xd,z[0]=b.wc[0]*Math.sin(B),z[1]=b.wc[1]*Math.cos(B),G[0]=z[0],G[1]=z[1],G[2]=z[2]}function p(){var B=n(b.H.Rc[0],b.H.Rc[1]);
ca.Xa=b.Sc*B+(1-b.Sc)*ca.Xa;.6<ca.Xa&&!ca.T?(ca.Wb.forEach(function(K){K(!0)}),ca.T=!0):.4>ca.Xa&&ca.T&&(ca.Wb.forEach(function(K){K(!1)}),ca.T=!1)}function n(B,K){B+=w*K;return(y[4*B]+y[4*B+1]+y[4*B+2]+y[4*B+3])/1020}function r(){H.forEach(function(B,K){if(ca.T){var ba=(b.hd+K)%w,O=b.af+Math.floor((b.hd+K)/w);O=w-1-O;ba+=w*O;O=y.slice(4*ba,4*ba+4);ba=(O[0]+O[1]+O[2]+O[3])/1020;O=b.xe*Math.sqrt((O[0]*O[0]+O[1]*O[1]+O[2]*O[2]+O[3]*O[3])/1020-ba*ba);H[K]=B>ba-O&&B<ba+O?B:ba}else H[K]=0})}function h(B){t=
new jb({ab:B.layers,$b:"gpuRaw",Xb:function(K){var ba=m;ba.jb.Dd(1);F.viewport(0,0,1,1);I.set("s55");I.K("u38",Y.O);I.Ed("u39",Ab.get());I.Ed("u40",b.ia);R.l(!1,!1);ba.Id.Dd(1);I.set("s56");I.K("u38",Y.O);ba.jb.g(0);R.l(!1,!1);Q=K}});B=t.Ge();B!==D&&(D=B,x.Uc(),m.Wa.resize(D,D),x.Gd());w=t.Me();a()}var v=-1,A=-1,D=64,g=b.N,t=null,w=0,k=null,m={},J=null,H=null,P=null,y=null,L=null,Q=null,u=[0,0,0],d=[0,0,0],z=[0,0,0],G=[0,0,0],N=[0,0,0],f=1,C={Of:[.5,.5],Nf:[.5,.5],element:null,qa:null,Ia:[-1,-1]},
M=0,S={me:-4,df:-3,Cg:-2,ec:-1,play:0},Z=S.df,ca={Xa:0,T:!1,Wb:[]},Y={O:1,xd:1,pd:1,td:1,oa:[0,0,0],ed:Date.now(),dd:new Float32Array(b.Ub),Pb:0},ma=0,x={Uc:function(){v=b.width;A=b.height;Ab.s({eb:b.vf,kd:b.uf,ja:v,Gb:A,yd:b.wf,ia:b.ia,Ad:!0});k=[1,v/A]},Gd:function(){I.I("s53",[{type:"1i",name:"u1",value:0}]);I.I("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:k}]);I.I("s57",[{type:"1i",name:"u41",value:0},{type:"2f",name:"u42",value:k},{type:"3f",
name:"u43",value:[0,.5,1]}]);I.I("s55",[{type:"1i",name:"u44",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u45",value:b.zd[0]},{type:"1f",name:"u46",value:b.zd[1]},{type:"1f",name:"u47",value:b.Hf},{type:"1f",name:"u48",value:b.threshold},{type:"1f",name:"u49",value:b.te},{type:"1f",name:"u50",value:k[0]}]);I.I("s56",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u6",value:1},{type:"2f",name:"u51",value:b.Wd}])},je:function(){I.uc([{id:"s53",name:"_",Ca:"attribute vec2 a0;uniform vec2 u52,u53;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u53+u52*a0;}",
Ga:["a0"],ua:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u52","u53"],precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Ca:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u52,u53;const vec2 f=vec2(.25,.5),i=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,f);vec2 b=a.gb,c=a.a*u42,d=a0*.5+e,h=b+(d-e)*c;vv0=u53+u52*2.*(h-.5),gl_Position=vec4(a0,0.,1.);}",
Ga:["a0"],ua:[2],i:["u1","u41","u42","u52","u53"],precision:"lowp"},{id:"s55",name:"_",Ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u44,u41;uniform vec3 u39,u40;uniform float u45,u46,u47,u48,u50,u38,u49;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u44,vec2(.4375,.9375)),h=texture2D(u44,vec2(.5625,.9375));float i=dot(g-h,e);bool j=i>u48;vec4 a=texture2D(u41,vec2(.5,.5));j?a.r=2.:a.r>u47?a.r=0.:a.r>1.9&&(a.a>u46||a.a<u45)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u39,a.r=1.;else{float c=dot(e,texture2D(u44,vec2(.0625,.9375))),d=dot(e,texture2D(u44,vec2(.1875,.9375))),f=dot(e,texture2D(u44,vec2(.3125,.9375))),b;a.r>1.9?(b=1.-u38,b*=1.-step(abs(c),u49)*step(abs(d),u49)*step(abs(f),u49)):(b=1.,a.r=0.);float k=a.a*u50;a.gba+=vec3(c,d,f)*u40*b*k;}gl_FragColor=a;}",
i:"u44 u41 u39 u45 u46 u47 u48 u40 u50 u38 u49".split(" ")},{id:"s57",name:"_",h:"uniform sampler2D u41;uniform vec3 u43;uniform vec2 u42;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u41,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u42,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u43*max(b.x,b.y),1.);}",i:["u41","u42","u43"],precision:"lowp"},{id:"s56",name:"_",h:"uniform sampler2D u1,u6;uniform vec2 u51;uniform float u38;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);float c=(1.-u38)*(u51.y-u51.x)+u51.x;gl_FragColor=mix(b,a,c*f);}",
i:["u1","u6","u51","u38"]}])},Pe:function(B){var K=new Float32Array([0,.5,.5,0]);B.Wa=T.instance({isPot:!0,isFloat:!1,width:D});K={width:1,height:1,isFloat:!0,isPot:!1,array:K};B.jb=Va.instance(K);B.Id=Va.instance(K)},ke:function(){C.qa=T.instance({C:C.element,isPot:!1,isFloat:!1,isFlipY:!0});J=T.instance({isPot:!1,isFloat:!1,width:v,height:A})},s:function(){x.ke();x.Pe(m);Bb.s({$c:!1,N:g});zb.s({Tb:0,n:b.pb[1]-b.pb[0]+1,gd:b.pb[0]});Gb?h(Gb):Ca(function(B){B=JSON.parse(B);h(B)})},m:function(){Bb.stop();
t&&(t.m(),t=null);Z=S.me},fe:function(B){X.rb&&X.rb();var K={video:{facingMode:{ideal:Db.facingMode},width:{min:Db.minWidth,max:Db.maxWidth,ideal:Db.idealWidth},height:{min:Db.minHeight,max:Db.maxHeight,ideal:Db.idealHeight}},audio:Db.isAudio};rb(K,Db.deviceId);yb(function(ba,O){Eb=O;X.sb&&X.sb();B(ba)},function(){window.ob&&window.ob("WEBCAM_UNAVAILABLE")},K)},fd:function(B,K){x.je();C.element=B;Fb=C.element;x.Nd();x.Uc();x.Gd();x.s();K&&K()},Oc:function(){var B=[-1,-1],K=C.element;"VIDEO"===K.nodeName?
(B[0]=K.videoWidth,B[1]=K.videoHeight):(B[0]=K.width,B[1]=K.height);return B},Nd:function(){var B=x.Oc();C.Ia[0]=B[0];C.Ia[1]=B[1];Sa.Pa().width=B[0];Sa.Pa().height=B[1];b.width=B[0];b.height=B[1];var K=C.Of,ba=C.Nf,O=B[1]/B[0];B=Sa.P()/Sa.B();O>B?1>=O?K[0]*=O:K[1]/=O:(K[0]*=O,O=1/B,K[0]*=O,K[1]*=O);K[1]*=B;K=[{type:"2f",name:"u52",value:K},{type:"2f",name:"u53",value:ba}];I.I("s54",[{type:"1i",name:"u1",value:0}].concat(K));I.I("s53",K)}};Hb.push(x);return x}X.onLoad=function(a){X.ready?a():X.ka.push(a)};
X.switch_displayVideo=function(a){X.Ea=a;X.Da&&(X.Da.style.display=X.Ea?"block":"none")};X.onWebcamAsk=function(a){X.rb=a};X.onContextLost=function(a){X.qb=a};X.onWebcamGet=function(a){X.sb=a};X.destroy=function(){Bb.m();Fb&&Fb.srcObject&&Fb.srcObject.getTracks().forEach(function(a){a.stop()});Hb.forEach(function(a){a.m()});Hb.splice(0);Sa.m();X.switch_displayVideo(!1);X.initialized=!1;X.ka.splice(0)};X.set_size=function(a,c){b.width=a;b.height=c};X.get_size=function(){return{width:b.width,height:b.height}};
X.get_videoStream=function(){return Eb};X.get_video=function(){return Fb};X.get_cv=function(){return Sa.Pa()};X.set_color=function(a){I.I("s57",[{type:"3f",name:"u43",value:a}])};
X.init=function(a){var c=Ib(),e=a.callbackReady?a.callbackReady:function(p){console.log("ERR:",p)},l=a.callbackReady?a.callbackReady.bind(null,!1):!1;if(a.canvasId||a.canvas){var q=a.canvas?a.canvas:document.getElementById(a.canvasId);if(q)if(X.initialized)e("ALREADY_INITIALIZED");else{X.initialized=!0;window.ob=e?function(p){e(p);window.ob=!1}:!1;a.NNCPath&&(b.rc=a.NNCPath);"undefined"!==typeof a.NNC&&(Gb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);l&&X.ka.push(l);if(!Sa.s({xb:q,width:b.width,
height:b.height,debug:!1,Kb:!1,ld:function(){X.qb&&X.qb()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;X.Da=Sa.Pa();X.Ea||(X.Da.style.display="none");a.videoSettings&&a.videoSettings.videoElement?c.fd(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Db,a.videoSettings),c.fe(function(p){c.fd(p,!1)}));return!0}else e("INVALID_CANVAS")}else e("NO_CANVASID")};window.JEELIZFACEEXPRESSIONS=X;
;return JEELIZFACEEXPRESSIONS||window.JEELIZFACEEXPRESSIONS;})();